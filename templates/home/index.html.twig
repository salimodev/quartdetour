{% extends 'layout.html.twig' %}

{% block title %}Quart de Tour{% endblock %}
 {% block Head %}
        {{ parent() }}
{% block LinksCss %}
     {{ parent() }}  
    
{% endblock %}
    
    {% endblock %}
{% block Content %}
{{ parent() }} 
<body>
   

    <!-- قسم البطل المعدل -->
    <section class="hero">
        <div class="hero-content">
            <h1>Quart de Tour</h1>
            <p class="hero-subtitle">La plateforme qui révolutionne l'achat et la vente de pièces automobiles en Tunisie</p>
        </div>
    </section>

   <!-- أقسام المستخدمين بالشكل الدائري -->
<section class="user-sections">
    <h2 class="section-title">Choisissez votre <span class="highlight">profil</span></h2>
    <div class="circle-container">
        <div class="center-circle">
            Quart de Tour<br>Platform
        </div>

     <div class="user-circle" style="--angle: 0deg;" data-user="Propriétaire" data-role="proprietaire">
      <div class="user-icon">🚗</div>
      <h3>Propriétaire</h3>
  </div>

  <div class="user-circle" style="--angle: 72deg;" data-user="Mécanicien">
      <div class="user-icon">🔧</div>
      <h3>Mécanicien</h3>
  </div>

  <div class="user-circle" style="--angle: 144deg;" data-user="Vendeur Neuf">
      <div class="user-icon">🏢</div>
      <h3>Vendeur Neuf</h3>
  </div>

  <div class="user-circle" style="--angle: 216deg;" data-user="Vendeur Occasion">
      <div class="user-icon">🔄</div>
      <h3>Vendeur Occasion</h3>
  </div>

  <div class="user-circle" style="--angle: 288deg;" data-user="Particulier">
      <div class="user-icon">🎯</div>
      <h3>Particulier</h3>
  </div>
    </div>
</section>
<!-- Popup -->
<!-- ✅ Modal Bootstrap -->
{% if not app.user %}
<div class="role-popup" id="rolePopup" style="display: none;">
    <div class="popup-content">
      <h3 id="popupRole" style="color:#fff">Propriétaire</h3>
      <div class="popup-buttons">
        <button class="btn-popup" onclick="window.location.href='{{ path('app_login') }}'">Se connecter</button>
        <button class="btn-popup" onclick="window.location.href='{{ path('app_register') }}'">S'inscrire</button>
        <button class="btn-popup">Inviter</button>
      </div>
      <button class="popup-close">✖</button>
    </div>
  </div>
{% endif %}
    <!-- قسم الطلبات الحديثة -->
    <section class="recent-requests">
        <h2 class="section-title">Demandes <span class="highlight">récentes</span></h2>
        <div class="requests-grid">
            <!-- طلب 1 -->
            <div class="request-card">
                <div class="request-header">
                    <div class="request-title">Freins avant BMW X5 2015</div>
                    <div class="request-badge">Nouvelle</div>
                </div>
                <div class="request-meta">
                    <span>📍 Tunis</span>
                    <span>👤 Mohamed</span>
                    <span>🕒 2h</span>
                </div>
                <div class="request-image">📷 Image de la pièce demandée</div>
                <p class="request-text">Je cherche des disques et plaquettes de frein avant originaux pour BMW X5 2015. État neuf uniquement.</p>
                <button class="btn btn-offer">📩 Proposer un prix</button>
            </div>
            
            <!-- طلب 2 -->
            <div class="request-card">
                <div class="request-header">
                    <div class="request-title">Rétroviseur Renault Clio 4</div>
                    <div class="request-badge">Occasion</div>
                </div>
                <div class="request-meta">
                    <span>📍 Sfax</span>
                    <span>👤 Sarah</span>
                    <span>🕒 5h</span>
                </div>
                <div class="request-image">📷 Image de la pièce demandée</div>
                <p class="request-text">Rétroviseur côté conducteur, couleur noir. État correct accepté. Budget maximum 80 DT.</p>
                <button class="btn btn-offer">📩 Proposer un prix</button>
            </div>
            
            <!-- طلب 3 -->
            <div class="request-card">
                <div class="request-header">
                    <div class="request-title">Service réparation embrayage</div>
                    <div class="request-badge">Service</div>
                </div>
                <div class="request-meta">
                    <span>📍 Sousse</span>
                    <span>👤 Mécanicien Pro</span>
                    <span>🕒 1j</span>
                </div>
                <div class="request-image">📷 Photo du véhicule</div>
                <p class="request-text">Propose service de remplacement d'embrayage pour tous modèles. Garantie 6 mois.</p>
                <button class="btn btn-offer">📞 Contacter</button>
            </div>
        </div>
    </section>

    

   
</body>
{% endblock %}
{% block javascript %}
{{ parent() }}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      const circles = document.querySelectorAll('.user-circle');
      const popup = document.getElementById('rolePopup');
      const popupRole = document.getElementById('popupRole');
      const closeBtn = document.querySelector('.popup-close');
      circles.forEach(circle => {
        circle.addEventListener('click', () => {
          popupRole.textContent = circle.querySelector('h3').textContent;
          popup.style.display = 'flex';
        });
      });
      closeBtn.addEventListener('click', () => popup.style.display = 'none');
      popup.addEventListener('click', e => { if (e.target === popup) popup.style.display = 'none'; });
    });
  </script>
{% endblock %}